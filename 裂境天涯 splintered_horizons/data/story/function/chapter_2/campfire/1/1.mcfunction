# The entire storyline is executed through the scoreboard story(dummy) combined with the schedule command

execute positioned 807 201 149 if score story.chapter_2.campfire.1 story.chapter_2 matches 1 unless score #story:icon/story/chapter_2/scebe_1 global.main matches 1 as @n[type=item_display,tag=aj.rainy_night.root,distance=..3] on passengers run data modify entity @s Glowing set value 0b
execute if score story.chapter_2.campfire.1 story.chapter_2 matches 1 run scoreboard players set #story:icon/story/chapter_2/scebe_1 global.main 1

execute positioned 807 201 149 if score story.chapter_2.campfire.1 story.chapter_2 matches 1 run tellraw @a[distance=..16] [{"translate": "stoy.characters.sophia",color:"white","bold":true},{"player":{"properties":[{"name":"textures","value":"ewogICJ0aW1lc3RhbXAiIDogMTczODMyNzM1NjE5OCwKICAicHJvZmlsZUlkIiA6ICJjNDIzYjQwMWZiOGU0ODc3YjMzMmVmMjhiZDdlZGZmZCIsCiAgInByb2ZpbGVOYW1lIiA6ICJSZWFjdGlvbkJyaW5lWVQiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWU2YzhhOWE1OWNkYjY5YzJiM2E3NjAxYWJhODJmNjMwOWQ3ZGQ0NWM0ZTg3OGE5YzQ2M2YwNDkxNDllYzI1IiwKICAgICAgIm1ldGFkYXRhIiA6IHsKICAgICAgICAibW9kZWwiIDogInNsaW0iCiAgICAgIH0KICAgIH0KICB9Cn0="}]},"bold":false},{"text":" : ","color":"white","bold": false},{translate:"character.stellar",bold:true,color:"dark_green",hover_event:{action:"show_text",value:[{translate:"story.icon.character.stellar",color:"gray"},{text:"\n"},{translate:"story.icon.character.stellar.desc.1",color:"gray"},{text:"\n"},{text:"\n"},{translate:"proper_noun.desc.2",color:"white"},{keybind:"key.advancements",bold:true,color:"dark_green"},{translate:"proper_noun.desc.3",color:"white"}]}}," ",{"translate": "story.chapter_2.campfire.1.2","fallback": "我們到了","bold": false}]
execute positioned 807 201 149 if score story.chapter_2.campfire.1 story.chapter_2 matches 2 run tellraw @a[distance=..16] [{"translate": "stoy.characters.sophia",color:"white","bold":true},{"player":{"properties":[{"name":"textures","value":"ewogICJ0aW1lc3RhbXAiIDogMTczODMyNzM1NjE5OCwKICAicHJvZmlsZUlkIiA6ICJjNDIzYjQwMWZiOGU0ODc3YjMzMmVmMjhiZDdlZGZmZCIsCiAgInByb2ZpbGVOYW1lIiA6ICJSZWFjdGlvbkJyaW5lWVQiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWU2YzhhOWE1OWNkYjY5YzJiM2E3NjAxYWJhODJmNjMwOWQ3ZGQ0NWM0ZTg3OGE5YzQ2M2YwNDkxNDllYzI1IiwKICAgICAgIm1ldGFkYXRhIiA6IHsKICAgICAgICAibW9kZWwiIDogInNsaW0iCiAgICAgIH0KICAgIH0KICB9Cn0="}]},"bold":false},{"text":" : ","color":"white","bold": false},{"translate": "story.chapter_2.campfire.1.3","fallback": "[蘇菲亞] 在前方危機危機四伏的洞穴最深處應該就是第二把魔劍的位置","bold": false}]
execute positioned 807 201 149 if score story.chapter_2.campfire.1 story.chapter_2 matches 3 run tellraw @a[distance=..16] [{"translate": "stoy.characters.sophia",color:"white","bold":true},{"player":{"properties":[{"name":"textures","value":"ewogICJ0aW1lc3RhbXAiIDogMTczODMyNzM1NjE5OCwKICAicHJvZmlsZUlkIiA6ICJjNDIzYjQwMWZiOGU0ODc3YjMzMmVmMjhiZDdlZGZmZCIsCiAgInByb2ZpbGVOYW1lIiA6ICJSZWFjdGlvbkJyaW5lWVQiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWU2YzhhOWE1OWNkYjY5YzJiM2E3NjAxYWJhODJmNjMwOWQ3ZGQ0NWM0ZTg3OGE5YzQ2M2YwNDkxNDllYzI1IiwKICAgICAgIm1ldGFkYXRhIiA6IHsKICAgICAgICAibW9kZWwiIDogInNsaW0iCiAgICAgIH0KICAgIH0KICB9Cn0="}]},"bold":false},{"text":" : ","color":"white","bold": false},{"translate": "story.chapter_2.campfire.1.4","fallback": "[蘇菲亞] 準備好了我們就出發吧","bold": false}]
execute positioned 807 201 149 if score story.chapter_2.campfire.1 story.chapter_2 matches 4 run tellraw @a[distance=..16] [{"translate": "stoy.characters.sophia",color:"white","bold":true},{"player":{"properties":[{"name":"textures","value":"ewogICJ0aW1lc3RhbXAiIDogMTczODMyNzM1NjE5OCwKICAicHJvZmlsZUlkIiA6ICJjNDIzYjQwMWZiOGU0ODc3YjMzMmVmMjhiZDdlZGZmZCIsCiAgInByb2ZpbGVOYW1lIiA6ICJSZWFjdGlvbkJyaW5lWVQiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWU2YzhhOWE1OWNkYjY5YzJiM2E3NjAxYWJhODJmNjMwOWQ3ZGQ0NWM0ZTg3OGE5YzQ2M2YwNDkxNDllYzI1IiwKICAgICAgIm1ldGFkYXRhIiA6IHsKICAgICAgICAibW9kZWwiIDogInNsaW0iCiAgICAgIH0KICAgIH0KICB9Cn0="}]},"bold":false},{"text":" : ","color":"white","bold": false},{"translate": "story.chapter_2.campfire.1.5","fallback": "[蘇菲亞] 如果我們能拯救世界","bold": false}]
execute positioned 807 201 149 if score story.chapter_2.campfire.1 story.chapter_2 matches 5 run tellraw @a[distance=..16] [{"translate": "stoy.characters.sophia",color:"white","bold":true},{"player":{"properties":[{"name":"textures","value":"ewogICJ0aW1lc3RhbXAiIDogMTczODMyNzM1NjE5OCwKICAicHJvZmlsZUlkIiA6ICJjNDIzYjQwMWZiOGU0ODc3YjMzMmVmMjhiZDdlZGZmZCIsCiAgInByb2ZpbGVOYW1lIiA6ICJSZWFjdGlvbkJyaW5lWVQiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWU2YzhhOWE1OWNkYjY5YzJiM2E3NjAxYWJhODJmNjMwOWQ3ZGQ0NWM0ZTg3OGE5YzQ2M2YwNDkxNDllYzI1IiwKICAgICAgIm1ldGFkYXRhIiA6IHsKICAgICAgICAibW9kZWwiIDogInNsaW0iCiAgICAgIH0KICAgIH0KICB9Cn0="}]},"bold":false},{"text":" : ","color":"white","bold": false},{"translate": "story.chapter_2.campfire.1.6","fallback": "[蘇菲亞] 我想與你一同欣賞，一個沒有深淵的新世界","bold": false}]
execute positioned 807 201 149 if score story.chapter_2.campfire.1 story.chapter_2 matches 6 run tellraw @a[distance=..16] [{"translate": "stoy.characters.sophia",color:"white","bold":true},{"player":{"properties":[{"name":"textures","value":"ewogICJ0aW1lc3RhbXAiIDogMTczODMyNzM1NjE5OCwKICAicHJvZmlsZUlkIiA6ICJjNDIzYjQwMWZiOGU0ODc3YjMzMmVmMjhiZDdlZGZmZCIsCiAgInByb2ZpbGVOYW1lIiA6ICJSZWFjdGlvbkJyaW5lWVQiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWU2YzhhOWE1OWNkYjY5YzJiM2E3NjAxYWJhODJmNjMwOWQ3ZGQ0NWM0ZTg3OGE5YzQ2M2YwNDkxNDllYzI1IiwKICAgICAgIm1ldGFkYXRhIiA6IHsKICAgICAgICAibW9kZWwiIDogInNsaW0iCiAgICAgIH0KICAgIH0KICB9Cn0="}]},"bold":false},{"text":" : ","color":"white","bold": false},{"translate": "story.chapter_2.campfire.1.7","fallback": "[蘇菲亞] 讓雨不再代表所有人的淚水，而是為新世界帶來生機","bold": false}]

execute if score story.chapter_2.campfire.1 story.chapter_2 matches 6 run tellraw @a[distance=..16] [{"translate": "story.end","fallback": "對話結束，再次點擊可重複查看對話內容","color":"gold"},{"text":"\n"}]
execute if score story.chapter_2.campfire.1 story.chapter_2 matches 6 run playsound minecraft:entity.player.levelup voice @a ~ ~1 ~ 0.5 1

execute if score story.chapter_2.campfire.1 story.chapter_2 matches 7 run schedule function story:chapter_2/campfire/1/0 1t

data remove entity @s interaction

execute unless score story.chapter_2.campfire.1 story.chapter_2 matches 1..7 run return 0

scoreboard players add story.chapter_2.campfire.1 story.chapter_2 1
playsound minecraft:ui.button.click voice @a ~ ~1 ~ 0.5 1