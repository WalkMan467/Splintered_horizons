execute store result score $split_health ca.ench_aberration_lvl run data get storage carto_event current[-1].parameters.health 100
execute store result score $split_size ca.ench_aberration_lvl run data get storage carto_event current[-1].parameters.size 100
execute store result score $split_half_size ca.ench_aberration_lvl run data get storage carto_event current[-1].parameters.half_size 100
execute store result score $split_damage ca.ench_aberration_lvl run data get storage carto_event current[-1].parameters.damage 100

scoreboard players operation $split_health ca.ench_aberration_lvl /= $2 ca.CONSTANT
scoreboard players operation $split_size ca.ench_aberration_lvl *= $75 ca.CONSTANT
scoreboard players operation $split_half_size ca.ench_aberration_lvl *= $75 ca.CONSTANT
scoreboard players operation $split_damage ca.ench_aberration_lvl *= $90 ca.CONSTANT

scoreboard players operation $split_size ca.ench_aberration_lvl /= $100 ca.CONSTANT
scoreboard players operation $split_half_size ca.ench_aberration_lvl /= $100 ca.CONSTANT
scoreboard players operation $split_damage ca.ench_aberration_lvl /= $100 ca.CONSTANT

execute store result storage carto_event current[-1].parameters.health float 0.01 run scoreboard players get $split_health ca.ench_aberration_lvl
execute store result storage carto_event current[-1].parameters.size double 0.01 run scoreboard players get $split_size ca.ench_aberration_lvl
execute store result storage carto_event current[-1].parameters.half_size double 0.01 run scoreboard players get $split_half_size ca.ench_aberration_lvl
execute store result storage carto_event current[-1].parameters.damage double 0.01 run scoreboard players get $split_damage ca.ench_aberration_lvl

execute store result score $split_size_neg_1 ca.ench_aberration_lvl run data get storage carto_event current[-1].parameters.size 100
execute store result storage carto_event current[-1].parameters.size_neg_1 double 0.01 run scoreboard players remove $split_size_neg_1 ca.ench_aberration_lvl 100

execute store result score $split_splits ca.ench_aberration_lvl run data get storage carto_event current[-1].parameters.splits 1
execute store result storage carto_event current[-1].parameters.splits int 1 run scoreboard players remove $split_splits ca.ench_aberration_lvl 1

execute on passengers run data modify storage cartographer:custom_enchantments aberration_skin set from entity @s item

execute if score @s ca.aberration_splits matches 1 on passengers at @s run summon sheep ^1 ^500 ^ {Silent:1b,DeathLootTable:"minecraft:entities/slime",AbsorptionAmount:1f,Health:256f,Sheared:1b,Color:0b,Team:"no_collide",Tags:["ca.aberration_bomb","ca.new_aberration_bomb","ca.registered"],Passengers:[{id:"minecraft:item_display",teleport_duration:1,interpolation_duration:0,brightness:{sky:15,block:15},Tags:["ca.aberration_display"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,-0.6f,0f],scale:[0.0f,0.0f,0.0f]},item:{id:"minecraft:player_head",count:1,components:{"minecraft:profile":{name:"MHF_Slime",id:[I; -2029340013, 1088964787, -1983565076, -535992784],properties:[{name:"textures",value:"ewogICJ0aW1lc3RhbXAiIDogMTcyNjcxNDUzNzY2MSwKICAicHJvZmlsZUlkIiA6ICI4NzBhYmE5MzQwZTg0OGIzODljNTMyZWNlMDBkNjYzMCIsCiAgInByb2ZpbGVOYW1lIiA6ICJNSEZfU2xpbWUiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODZjMjdiMDEzZjFiZjMzNDQ4NjllODFlNWM2MTAwMjdiYzQ1ZWM1Yjc5NTE0ZmRjOTZlMDFkZjFiN2UzYTM4NyIKICAgIH0KICB9Cn0="}]}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:0,duration:20000000,show_particles:0b,show_icon:0b,ambient:1b}],attributes:[{id:"minecraft:jump_strength",base:0},{id:"minecraft:knockback_resistance",base:0},{id:"minecraft:max_absorption",base:1024},{id:"minecraft:max_health",base:1024},{id:"minecraft:movement_speed",base:0},{id:"minecraft:safe_fall_distance",base:1024},{id:"minecraft:scale",base:0.75},{id:"minecraft:step_height",base:1.6}]}
execute if score @s ca.aberration_splits matches 1 on passengers at @s run summon sheep ^-1 ^500 ^ {Silent:1b,DeathLootTable:"minecraft:entities/slime",AbsorptionAmount:1f,Health:256f,Sheared:1b,Color:0b,Team:"no_collide",Tags:["ca.aberration_bomb","ca.new_aberration_bomb","ca.registered"],Passengers:[{id:"minecraft:item_display",teleport_duration:1,interpolation_duration:0,brightness:{sky:15,block:15},Tags:["ca.aberration_display"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,-0.6f,0f],scale:[0.0f,0.0f,0.0f]},item:{id:"minecraft:player_head",count:1,components:{"minecraft:profile":{name:"MHF_Slime",id:[I; -2029340013, 1088964787, -1983565076, -535992784],properties:[{name:"textures",value:"ewogICJ0aW1lc3RhbXAiIDogMTcyNjcxNDUzNzY2MSwKICAicHJvZmlsZUlkIiA6ICI4NzBhYmE5MzQwZTg0OGIzODljNTMyZWNlMDBkNjYzMCIsCiAgInByb2ZpbGVOYW1lIiA6ICJNSEZfU2xpbWUiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODZjMjdiMDEzZjFiZjMzNDQ4NjllODFlNWM2MTAwMjdiYzQ1ZWM1Yjc5NTE0ZmRjOTZlMDFkZjFiN2UzYTM4NyIKICAgIH0KICB9Cn0="}]}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:0,duration:20000000,show_particles:0b,show_icon:0b,ambient:1b}],attributes:[{id:"minecraft:jump_strength",base:0},{id:"minecraft:knockback_resistance",base:0},{id:"minecraft:max_absorption",base:1024},{id:"minecraft:max_health",base:1024},{id:"minecraft:movement_speed",base:0},{id:"minecraft:safe_fall_distance",base:1024},{id:"minecraft:scale",base:0.75},{id:"minecraft:step_height",base:1.6}]}

execute if score @s ca.aberration_splits matches 2 on passengers at @s run summon sheep ^1 ^500 ^ {Silent:1b,DeathLootTable:"minecraft:entities/slime",AbsorptionAmount:1f,Health:256f,Sheared:1b,Color:0b,Team:"no_collide",Tags:["ca.aberration_bomb","ca.new_aberration_bomb","ca.registered"],Passengers:[{id:"minecraft:item_display",teleport_duration:1,interpolation_duration:0,brightness:{sky:15,block:15},Tags:["ca.aberration_display"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,-0.6f,0f],scale:[0.0f,0.0f,0.0f]},item:{id:"minecraft:player_head",count:1,components:{"minecraft:profile":{name:"MHF_Slime",id:[I; -2029340013, 1088964787, -1983565076, -535992784],properties:[{name:"textures",value:"ewogICJ0aW1lc3RhbXAiIDogMTcyNjcxNDUzNzY2MSwKICAicHJvZmlsZUlkIiA6ICI4NzBhYmE5MzQwZTg0OGIzODljNTMyZWNlMDBkNjYzMCIsCiAgInByb2ZpbGVOYW1lIiA6ICJNSEZfU2xpbWUiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODZjMjdiMDEzZjFiZjMzNDQ4NjllODFlNWM2MTAwMjdiYzQ1ZWM1Yjc5NTE0ZmRjOTZlMDFkZjFiN2UzYTM4NyIKICAgIH0KICB9Cn0="}]}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:0,duration:20000000,show_particles:0b,show_icon:0b,ambient:1b}],attributes:[{id:"minecraft:jump_strength",base:0},{id:"minecraft:knockback_resistance",base:0},{id:"minecraft:max_absorption",base:1024},{id:"minecraft:max_health",base:1024},{id:"minecraft:movement_speed",base:0},{id:"minecraft:safe_fall_distance",base:1024},{id:"minecraft:scale",base:1.00},{id:"minecraft:step_height",base:1.6}]}
execute if score @s ca.aberration_splits matches 2 on passengers at @s run summon sheep ^-1 ^500 ^ {Silent:1b,DeathLootTable:"minecraft:entities/slime",AbsorptionAmount:1f,Health:256f,Sheared:1b,Color:0b,Team:"no_collide",Tags:["ca.aberration_bomb","ca.new_aberration_bomb","ca.registered"],Passengers:[{id:"minecraft:item_display",teleport_duration:1,interpolation_duration:0,brightness:{sky:15,block:15},Tags:["ca.aberration_display"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,-0.6f,0f],scale:[0.0f,0.0f,0.0f]},item:{id:"minecraft:player_head",count:1,components:{"minecraft:profile":{name:"MHF_Slime",id:[I; -2029340013, 1088964787, -1983565076, -535992784],properties:[{name:"textures",value:"ewogICJ0aW1lc3RhbXAiIDogMTcyNjcxNDUzNzY2MSwKICAicHJvZmlsZUlkIiA6ICI4NzBhYmE5MzQwZTg0OGIzODljNTMyZWNlMDBkNjYzMCIsCiAgInByb2ZpbGVOYW1lIiA6ICJNSEZfU2xpbWUiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODZjMjdiMDEzZjFiZjMzNDQ4NjllODFlNWM2MTAwMjdiYzQ1ZWM1Yjc5NTE0ZmRjOTZlMDFkZjFiN2UzYTM4NyIKICAgIH0KICB9Cn0="}]}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:0,duration:20000000,show_particles:0b,show_icon:0b,ambient:1b}],attributes:[{id:"minecraft:jump_strength",base:0},{id:"minecraft:knockback_resistance",base:0},{id:"minecraft:max_absorption",base:1024},{id:"minecraft:max_health",base:1024},{id:"minecraft:movement_speed",base:0},{id:"minecraft:safe_fall_distance",base:1024},{id:"minecraft:scale",base:1.00},{id:"minecraft:step_height",base:1.6}]}

execute if score @s ca.aberration_splits matches 3 on passengers at @s run summon sheep ^1 ^500 ^ {Silent:1b,DeathLootTable:"minecraft:entities/slime",AbsorptionAmount:1f,Health:256f,Sheared:1b,Color:0b,Team:"no_collide",Tags:["ca.aberration_bomb","ca.new_aberration_bomb","ca.registered"],Passengers:[{id:"minecraft:item_display",teleport_duration:1,interpolation_duration:0,brightness:{sky:15,block:15},Tags:["ca.aberration_display"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,-0.6f,0f],scale:[0.0f,0.0f,0.0f]},item:{id:"minecraft:player_head",count:1,components:{"minecraft:profile":{name:"MHF_Slime",id:[I; -2029340013, 1088964787, -1983565076, -535992784],properties:[{name:"textures",value:"ewogICJ0aW1lc3RhbXAiIDogMTcyNjcxNDUzNzY2MSwKICAicHJvZmlsZUlkIiA6ICI4NzBhYmE5MzQwZTg0OGIzODljNTMyZWNlMDBkNjYzMCIsCiAgInByb2ZpbGVOYW1lIiA6ICJNSEZfU2xpbWUiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODZjMjdiMDEzZjFiZjMzNDQ4NjllODFlNWM2MTAwMjdiYzQ1ZWM1Yjc5NTE0ZmRjOTZlMDFkZjFiN2UzYTM4NyIKICAgIH0KICB9Cn0="}]}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:0,duration:20000000,show_particles:0b,show_icon:0b,ambient:1b}],attributes:[{id:"minecraft:jump_strength",base:0},{id:"minecraft:knockback_resistance",base:0},{id:"minecraft:max_absorption",base:1024},{id:"minecraft:max_health",base:1024},{id:"minecraft:movement_speed",base:0},{id:"minecraft:safe_fall_distance",base:1024},{id:"minecraft:scale",base:1.25},{id:"minecraft:step_height",base:1.6}]}
execute if score @s ca.aberration_splits matches 3 on passengers at @s run summon sheep ^-1 ^500 ^ {Silent:1b,DeathLootTable:"minecraft:entities/slime",AbsorptionAmount:1f,Health:256f,Sheared:1b,Color:0b,Team:"no_collide",Tags:["ca.aberration_bomb","ca.new_aberration_bomb","ca.registered"],Passengers:[{id:"minecraft:item_display",teleport_duration:1,interpolation_duration:0,brightness:{sky:15,block:15},Tags:["ca.aberration_display"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,-0.6f,0f],scale:[0.0f,0.0f,0.0f]},item:{id:"minecraft:player_head",count:1,components:{"minecraft:profile":{name:"MHF_Slime",id:[I; -2029340013, 1088964787, -1983565076, -535992784],properties:[{name:"textures",value:"ewogICJ0aW1lc3RhbXAiIDogMTcyNjcxNDUzNzY2MSwKICAicHJvZmlsZUlkIiA6ICI4NzBhYmE5MzQwZTg0OGIzODljNTMyZWNlMDBkNjYzMCIsCiAgInByb2ZpbGVOYW1lIiA6ICJNSEZfU2xpbWUiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODZjMjdiMDEzZjFiZjMzNDQ4NjllODFlNWM2MTAwMjdiYzQ1ZWM1Yjc5NTE0ZmRjOTZlMDFkZjFiN2UzYTM4NyIKICAgIH0KICB9Cn0="}]}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:0,duration:20000000,show_particles:0b,show_icon:0b,ambient:1b}],attributes:[{id:"minecraft:jump_strength",base:0},{id:"minecraft:knockback_resistance",base:0},{id:"minecraft:max_absorption",base:1024},{id:"minecraft:max_health",base:1024},{id:"minecraft:movement_speed",base:0},{id:"minecraft:safe_fall_distance",base:1024},{id:"minecraft:scale",base:1.25},{id:"minecraft:step_height",base:1.6}]}

execute if score @s ca.aberration_splits matches 4 on passengers at @s run summon sheep ^1 ^500 ^ {Silent:1b,DeathLootTable:"minecraft:entities/slime",AbsorptionAmount:1f,Health:256f,Sheared:1b,Color:0b,Team:"no_collide",Tags:["ca.aberration_bomb","ca.new_aberration_bomb","ca.registered"],Passengers:[{id:"minecraft:item_display",teleport_duration:1,interpolation_duration:0,brightness:{sky:15,block:15},Tags:["ca.aberration_display"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,-0.6f,0f],scale:[0.0f,0.0f,0.0f]},item:{id:"minecraft:player_head",count:1,components:{"minecraft:profile":{name:"MHF_Slime",id:[I; -2029340013, 1088964787, -1983565076, -535992784],properties:[{name:"textures",value:"ewogICJ0aW1lc3RhbXAiIDogMTcyNjcxNDUzNzY2MSwKICAicHJvZmlsZUlkIiA6ICI4NzBhYmE5MzQwZTg0OGIzODljNTMyZWNlMDBkNjYzMCIsCiAgInByb2ZpbGVOYW1lIiA6ICJNSEZfU2xpbWUiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODZjMjdiMDEzZjFiZjMzNDQ4NjllODFlNWM2MTAwMjdiYzQ1ZWM1Yjc5NTE0ZmRjOTZlMDFkZjFiN2UzYTM4NyIKICAgIH0KICB9Cn0="}]}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:0,duration:20000000,show_particles:0b,show_icon:0b,ambient:1b}],attributes:[{id:"minecraft:jump_strength",base:0},{id:"minecraft:knockback_resistance",base:0},{id:"minecraft:max_absorption",base:1024},{id:"minecraft:max_health",base:1024},{id:"minecraft:movement_speed",base:0},{id:"minecraft:safe_fall_distance",base:1024},{id:"minecraft:scale",base:1.5},{id:"minecraft:step_height",base:1.6}]}
execute if score @s ca.aberration_splits matches 4 on passengers at @s run summon sheep ^-1 ^500 ^ {Silent:1b,DeathLootTable:"minecraft:entities/slime",AbsorptionAmount:1f,Health:256f,Sheared:1b,Color:0b,Team:"no_collide",Tags:["ca.aberration_bomb","ca.new_aberration_bomb","ca.registered"],Passengers:[{id:"minecraft:item_display",teleport_duration:1,interpolation_duration:0,brightness:{sky:15,block:15},Tags:["ca.aberration_display"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,-0.6f,0f],scale:[0.0f,0.0f,0.0f]},item:{id:"minecraft:player_head",count:1,components:{"minecraft:profile":{name:"MHF_Slime",id:[I; -2029340013, 1088964787, -1983565076, -535992784],properties:[{name:"textures",value:"ewogICJ0aW1lc3RhbXAiIDogMTcyNjcxNDUzNzY2MSwKICAicHJvZmlsZUlkIiA6ICI4NzBhYmE5MzQwZTg0OGIzODljNTMyZWNlMDBkNjYzMCIsCiAgInByb2ZpbGVOYW1lIiA6ICJNSEZfU2xpbWUiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODZjMjdiMDEzZjFiZjMzNDQ4NjllODFlNWM2MTAwMjdiYzQ1ZWM1Yjc5NTE0ZmRjOTZlMDFkZjFiN2UzYTM4NyIKICAgIH0KICB9Cn0="}]}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:0,duration:20000000,show_particles:0b,show_icon:0b,ambient:1b}],attributes:[{id:"minecraft:jump_strength",base:0},{id:"minecraft:knockback_resistance",base:0},{id:"minecraft:max_absorption",base:1024},{id:"minecraft:max_health",base:1024},{id:"minecraft:movement_speed",base:0},{id:"minecraft:safe_fall_distance",base:1024},{id:"minecraft:scale",base:1.5},{id:"minecraft:step_height",base:1.6}]}

scoreboard players set $is_player ca.ench_aberration_lvl 0
execute if entity @s[tag=ca.player_spawned] run scoreboard players set $is_player ca.ench_aberration_lvl 1
execute unless entity @s[tag=ca.player_spawned] run scoreboard players set $is_player ca.ench_aberration_lvl 0
execute positioned ~ ~500 ~ as @e[type=sheep,sort=nearest,limit=2,tag=ca.new_aberration_bomb] run function carto_event:event/custom_ench/aberration/slime/split/branch with storage carto_event current[-1].parameters