execute if entity @s[type=player] if predicate cartographer_custom_enchantments:has/lunging/offhand unless data entity @s equipment.offhand.components."minecraft:custom_data".lunging_applied run function cartographer_custom_enchantments:enchantment/weapon/unique/melee/lunging/apply_offhand
execute if entity @s[type=player] if predicate cartographer_custom_enchantments:has/lunging/mainhand unless data entity @s SelectedItem.components."minecraft:custom_data".lunging_applied run function cartographer_custom_enchantments:enchantment/weapon/unique/melee/lunging/apply

execute if entity @s[type=player] if entity @s[tag=ca.has_custom_status_grounded] run tag @s add ca.indicator_cc
execute if entity @s[type=player] if entity @s[tag=ca.has_custom_status_grounded] run scoreboard players set @s ca.cc_time 4

execute if entity @s[type=player] if entity @s[tag=ca.has_custom_status_silenced] run tag @s add ca.indicator_cc
execute if entity @s[type=player] if entity @s[tag=ca.has_custom_status_silenced] run scoreboard players set @s ca.cc_time 4


execute unless entity @s[type=player] unless entity @s[tag=ca.has_custom_status_silenced] unless entity @s[tag=ca.has_custom_status_grounded] unless entity @s[tag=ca.mob_use_lunging] if predicate cartographer_core:periodic_tick/20 run scoreboard players operation $range ca.ench_var = @s ca.ench_lunging_lvl
execute unless entity @s[type=player] unless entity @s[tag=ca.has_custom_status_silenced] unless entity @s[tag=ca.has_custom_status_grounded] unless entity @s[tag=ca.mob_use_lunging] if predicate cartographer_core:periodic_tick/20 run scoreboard players operation $range ca.ench_var *= $2 ca.CONSTANT
execute unless entity @s[type=player] unless entity @s[tag=ca.has_custom_status_silenced] unless entity @s[tag=ca.has_custom_status_grounded] unless entity @s[tag=ca.mob_use_lunging] if predicate cartographer_core:periodic_tick/20 run scoreboard players operation $reduced_range ca.ench_var = $range ca.ench_var
execute unless entity @s[type=player] unless entity @s[tag=ca.has_custom_status_silenced] unless entity @s[tag=ca.has_custom_status_grounded] unless entity @s[tag=ca.mob_use_lunging] if predicate cartographer_core:periodic_tick/20 run scoreboard players operation $reduced_range ca.ench_var -= $4 ca.CONSTANT
execute unless entity @s[type=player] unless entity @s[tag=ca.has_custom_status_silenced] unless entity @s[tag=ca.has_custom_status_grounded] unless entity @s[tag=ca.mob_use_lunging] if predicate cartographer_core:periodic_tick/20 if score $range ca.ench_var matches ..0 run scoreboard players set $range ca.ench_var 4
execute unless entity @s[type=player] unless entity @s[tag=ca.has_custom_status_silenced] unless entity @s[tag=ca.has_custom_status_grounded] unless entity @s[tag=ca.mob_use_lunging] if predicate cartographer_core:periodic_tick/20 if score $reduced_range ca.ench_var matches ..0 run scoreboard players set $reduced_range ca.ench_var 0
execute unless entity @s[type=player] unless entity @s[tag=ca.has_custom_status_silenced] unless entity @s[tag=ca.has_custom_status_grounded] unless entity @s[tag=ca.mob_use_lunging] if predicate cartographer_core:periodic_tick/20 store result storage cartographer:custom_enchantments range double 1 run scoreboard players get $range ca.ench_var
execute unless entity @s[type=player] unless entity @s[tag=ca.has_custom_status_silenced] unless entity @s[tag=ca.has_custom_status_grounded] unless entity @s[tag=ca.mob_use_lunging] if predicate cartographer_core:periodic_tick/20 store result storage cartographer:custom_enchantments reduced_range double 1 run scoreboard players get $reduced_range ca.ench_var
execute unless entity @s[type=player] unless entity @s[tag=ca.has_custom_status_silenced] unless entity @s[tag=ca.has_custom_status_grounded] unless entity @s[tag=ca.mob_use_lunging] if predicate cartographer_core:periodic_tick/20 at @s run function cartographer_custom_enchantments:enchantment/weapon/unique/melee/lunging/mob_ai with storage cartographer:custom_enchantments
